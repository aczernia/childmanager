<div class="inside-container" *ngIf="classes && teachers && subjects">
    <mat-form-field>
        <mat-label>Klasa</mat-label>
        <mat-select 
          (selectionChange)="handleChangeClass($event)" [value]="currentClassId">
            <mat-option *ngFor="let class of classes" [value]="class.id">
              {{class.name}}
            </mat-option>
        </mat-select>
    </mat-form-field>

    <div class="scheduler-form">
        <form [formGroup]="lessonForm">
            <mat-form-field>
                <mat-label>Przedmiot</mat-label>
                <mat-select formControlName='subjectId'>
                    <mat-option *ngFor="let subject of subjects" [value]="subject.id">
                    {{subject.name}}
                </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Nauczyciel</mat-label>
                <mat-select formControlName='teacherId'>
                    <mat-option *ngFor="let teacher of teachers" [value]="teacher.id">
                    {{teacher.name}} {{teacher.lastName}}
                </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Dzień tygodnia</mat-label>
                <mat-select formControlName='dayOfWeek'>
                    <mat-option value="1">Poniedziałek</mat-option>
                    <mat-option value="2">Wtorek</mat-option>
                    <mat-option value="3">Środa</mat-option>
                    <mat-option value="4">Czwartek</mat-option>
                    <mat-option value="5">Piątek</mat-option>
                    <mat-option value="6">Sobota</mat-option>
                    <mat-option value="7">Niedziela</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <ngx-material-timepicker #begin></ngx-material-timepicker>
                <input matInput placeholder="Godzina rozpoczęcia" formControlName="lessonStart" [ngxTimepicker]="begin" />
            </mat-form-field>
            <mat-form-field>                
                <ngx-material-timepicker #end></ngx-material-timepicker>
                <input matInput placeholder="Godzina zakończenia" formControlName="lessonStop" [ngxTimepicker]="end" />
            </mat-form-field>
            <button mat-button class="submit-button" (click)="addItem()">Zapisz</button>
        </form>
    </div>
    <h2>Plan zajęć</h2>
    <div class="scheduler-container">
        <div class="scheduler-day">
            <h3>Poniedziałek</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(1)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Wtorek</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(2)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Środa</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(3)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Czwartek</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(4)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Piątek</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(5)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Sobota</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(6)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
        <div class="scheduler-day">
            <h3>Niedziela</h3>
            <div class="scheduler-item" *ngFor="let item of getItemsForDayWeek(7)">
                <span class="scheduler-subject-name">{{item.subject.name}}</span>
                <span class="scheduler-subject-time">{{formatTime(item.lessonStart)}} - {{formatTime(item.lessonStop)}}</span>
                <span class="scheduler-subject-teacher">{{item.teacher.name}} {{item.teacher.lastName}}</span>
            </div>
        </div>
    </div>
</div>